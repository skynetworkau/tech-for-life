<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payslip Decoder // Understand Your Pay</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-highlight: #334155;
            --accent-green: #10b981;
            --accent-blue: #3b82f6;
            --accent-yellow: #fbbf24;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
            --text-white: #f8fafc;
            --text-gray: #94a3b8;
            --text-muted: #64748b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .nav-links {
            position: fixed;
            top: 1rem;
            left: 1rem;
            display: flex;
            gap: 0.5rem;
            z-index: 100;
        }

        .home-link {
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--bg-highlight);
            border-radius: 6px;
            color: var(--text-gray);
            text-decoration: none;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .home-link:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .back-btn {
            padding: 0.6rem 1.2rem;
            background: var(--accent-blue);
            border: 1px solid var(--accent-blue);
            border-radius: 4px;
            color: #fff;
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: #2563eb;
            border-color: #2563eb;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2rem 0;
        }

        .logo {
            font-family: 'IBM Plex Mono', monospace;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .logo .payslip { color: var(--accent-green); }

        .tagline {
            color: var(--text-gray);
            font-size: 1rem;
        }

        /* Progress */
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-highlight);
            transition: all 0.3s;
        }

        .progress-dot.completed { background: var(--accent-green); }
        .progress-dot.current { background: var(--accent-yellow); box-shadow: 0 0 10px var(--accent-yellow); }

        /* Game Layout */
        .game-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }

        @media (max-width: 900px) {
            .game-layout { grid-template-columns: 1fr; }
        }

        /* Payslip */
        .payslip-container {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--bg-highlight);
        }

        .payslip-header {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .company-name {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .pay-period {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .payslip-body {
            padding: 1.5rem;
        }

        .employee-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--bg-highlight);
            margin-bottom: 1.5rem;
        }

        .info-item {
            font-size: 0.9rem;
        }

        .info-label {
            color: var(--text-muted);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .info-value {
            font-weight: 600;
        }

        /* Payslip Sections */
        .payslip-section {
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--bg-highlight);
        }

        .pay-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .pay-row:hover {
            background: var(--bg-highlight);
        }

        .pay-row.clickable {
            border: 2px dashed var(--accent-yellow);
        }

        .pay-row.clickable:hover {
            border-style: solid;
            background: rgba(251, 191, 36, 0.1);
        }

        .pay-row.answered {
            border: 2px solid var(--accent-green);
            background: rgba(16, 185, 129, 0.1);
        }

        .pay-row.current-question {
            border: 2px solid var(--accent-yellow);
            background: rgba(251, 191, 36, 0.15);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); }
        }

        .pay-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .pay-label .icon {
            font-size: 1rem;
        }

        .pay-amount {
            font-family: 'IBM Plex Mono', monospace;
            font-weight: 600;
        }

        .pay-amount.positive { color: var(--accent-green); }
        .pay-amount.negative { color: var(--accent-red); }

        /* Total Row */
        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--bg-highlight);
            border-radius: 8px;
            margin-top: 1rem;
        }

        .total-label {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .total-amount {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        /* Sidebar - Quiz */
        .quiz-panel {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--bg-highlight);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .quiz-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .quiz-score {
            font-family: 'IBM Plex Mono', monospace;
            color: var(--accent-green);
        }

        .question-box {
            background: var(--bg-highlight);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .question-number {
            font-size: 0.7rem;
            color: var(--accent-yellow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1rem;
            line-height: 1.6;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option-btn {
            padding: 1rem;
            background: var(--bg-dark);
            border: 2px solid var(--bg-highlight);
            border-radius: 8px;
            color: var(--text-white);
            font-family: 'IBM Plex Sans', sans-serif;
            font-size: 0.95rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .option-btn:disabled { cursor: not-allowed; opacity: 0.7; }

        .option-btn.correct {
            border-color: var(--accent-green) !important;
            background: rgba(16, 185, 129, 0.2) !important;
        }

        .option-btn.wrong {
            border-color: var(--accent-red) !important;
            background: rgba(239, 68, 68, 0.2) !important;
        }

        /* Explanation */
        .explanation-box {
            display: none;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--accent-green);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation-box.show { display: block; }

        .explanation-title {
            font-weight: 600;
            color: var(--accent-green);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .explanation-text {
            font-size: 0.9rem;
            color: var(--text-gray);
            line-height: 1.6;
        }

        .next-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent-green);
            border: none;
            border-radius: 8px;
            color: var(--bg-dark);
            font-family: 'IBM Plex Sans', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.2s;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 3rem;
            background: var(--bg-card);
            border-radius: 12px;
            max-width: 700px;
            margin: 0 auto;
        }

        .start-screen p {
            color: var(--text-gray);
            margin-bottom: 2rem;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .scenario-box {
            background: var(--bg-highlight);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            text-align: left;
        }

        .scenario-title {
            color: var(--accent-yellow);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .scenario-text {
            font-size: 0.95rem;
            color: var(--text-gray);
        }

        .start-btn {
            font-family: 'IBM Plex Sans', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 1rem 3rem;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .start-btn:hover {
            transform: scale(1.05);
        }

        /* End Screen */
        .end-screen {
            text-align: center;
            padding: 3rem;
            background: var(--bg-card);
            border-radius: 12px;
            max-width: 700px;
            margin: 0 auto;
        }

        .final-score {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 4rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .final-label {
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 2rem;
        }

        .key-takeaways {
            background: var(--bg-highlight);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: left;
            margin-bottom: 2rem;
        }

        .key-takeaways h3 {
            color: var(--accent-yellow);
            margin-bottom: 1rem;
        }

        .key-takeaways ul {
            list-style: none;
            padding: 0;
        }

        .key-takeaways li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-gray);
            font-size: 0.95rem;
        }

        .key-takeaways li::before {
            content: "üí∞";
            position: absolute;
            left: 0;
        }

        .play-again-btn {
            font-family: 'IBM Plex Sans', sans-serif;
            padding: 1rem 2rem;
            background: transparent;
            border: 2px solid var(--accent-green);
            border-radius: 8px;
            color: var(--accent-green);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .play-again-btn:hover {
            background: rgba(16, 185, 129, 0.1);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="nav-links">
        <a href="../../presentations/week8-money/index.html" class="home-link">‚Üê Week 8</a>
        <a href="../../index.html" class="home-link">Course Home</a>
    </div>

    <div class="container">
        <header class="header">
            <h1 class="logo">
                <span class="payslip">PAYSLIP</span> DECODER
            </h1>
            <p class="tagline">Understand what all those numbers actually mean</p>
        </header>

        <!-- Start Screen -->
        <div id="startScreen">
            <div class="start-screen">
                <p>You got your first payslip and it's full of confusing numbers. Gross pay? Net pay? PAYG? Super? Let's decode it all so you know exactly where your money goes.</p>

                <div class="scenario-box">
                    <div class="scenario-title">üìã Your Scenario</div>
                    <div class="scenario-text">
                        You're working casual at a retail store in Perth. You worked 25 hours this fortnight at $27.91/hour (retail award rate for a casual under 20). Let's break down your payslip.
                    </div>
                </div>

                <button class="start-btn" onclick="startGame()">DECODE MY PAYSLIP</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <div class="progress-bar" id="progressBar"></div>

            <div class="game-layout">
                <div class="payslip-container">
                    <div class="payslip-header">
                        <div>
                            <div class="company-name">RetailMart Pty Ltd</div>
                            <div class="pay-period">Pay Period: 1-14 January 2026</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.8rem; opacity: 0.8;">ABN: 12 345 678 901</div>
                        </div>
                    </div>

                    <div class="payslip-body">
                        <div class="employee-info">
                            <div class="info-item">
                                <div class="info-label">Employee</div>
                                <div class="info-value">Jordan Smith</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Employee ID</div>
                                <div class="info-value">EMP-2847</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Tax File Number</div>
                                <div class="info-value">XXX XXX XXX</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Pay Method</div>
                                <div class="info-value">Direct Deposit</div>
                            </div>
                        </div>

                        <div class="payslip-section">
                            <div class="section-title">Earnings</div>
                            <div class="pay-row" id="row-hours" data-question="0">
                                <div class="pay-label">
                                    <span class="icon">‚è∞</span>
                                    <span>Ordinary Hours (25 hrs @ $27.91)</span>
                                </div>
                                <div class="pay-amount positive">$697.75</div>
                            </div>
                        </div>

                        <div class="payslip-section">
                            <div class="section-title">Gross Pay</div>
                            <div class="pay-row" id="row-gross" data-question="1">
                                <div class="pay-label">
                                    <span class="icon">üíµ</span>
                                    <span>Gross Pay (before deductions)</span>
                                </div>
                                <div class="pay-amount positive">$697.75</div>
                            </div>
                        </div>

                        <div class="payslip-section">
                            <div class="section-title">Deductions</div>
                            <div class="pay-row" id="row-tax" data-question="2">
                                <div class="pay-label">
                                    <span class="icon">üèõÔ∏è</span>
                                    <span>PAYG Withholding (Tax)</span>
                                </div>
                                <div class="pay-amount negative">-$69.00</div>
                            </div>
                        </div>

                        <div class="payslip-section">
                            <div class="section-title">Superannuation</div>
                            <div class="pay-row" id="row-super" data-question="3">
                                <div class="pay-label">
                                    <span class="icon">üè¶</span>
                                    <span>Super Guarantee (11.5%)</span>
                                </div>
                                <div class="pay-amount">$80.24</div>
                            </div>
                        </div>

                        <div class="total-row" id="row-net" data-question="4">
                            <div class="total-label">Net Pay (in your bank)</div>
                            <div class="total-amount">$628.75</div>
                        </div>

                        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--bg-highlight);">
                            <div class="pay-row" id="row-ytd" data-question="5">
                                <div class="pay-label">
                                    <span class="icon">üìä</span>
                                    <span>YTD Gross Earnings</span>
                                </div>
                                <div class="pay-amount">$8,373.00</div>
                            </div>
                            <div class="pay-row" id="row-ytd-tax" data-question="6">
                                <div class="pay-label">
                                    <span class="icon">üìä</span>
                                    <span>YTD Tax Withheld</span>
                                </div>
                                <div class="pay-amount negative">$828.00</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quiz-panel">
                    <div class="quiz-header">
                        <div class="quiz-title">‚ùì Pop Quiz</div>
                        <div class="quiz-score" id="scoreDisplay">0/7</div>
                    </div>

                    <div class="question-box">
                        <div class="question-number" id="questionNumber">QUESTION 1 OF 7</div>
                        <div class="question-text" id="questionText"></div>
                    </div>

                    <div class="options-grid" id="optionsGrid"></div>

                    <div class="explanation-box" id="explanationBox">
                        <div class="explanation-title">‚úì Explanation</div>
                        <div class="explanation-text" id="explanationText"></div>
                    </div>

                    <button class="next-btn hidden" id="nextBtn" onclick="nextQuestion()">Next Question ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- End Screen -->
        <div id="endScreen" class="hidden">
            <div class="end-screen">
                <div class="final-score" id="finalScore">0/7</div>
                <div class="final-label">Questions Correct</div>

                <div class="key-takeaways">
                    <h3>Key Takeaways</h3>
                    <ul>
                        <li><strong>Gross pay</strong> is what you earn before anything is taken out</li>
                        <li><strong>Net pay</strong> is what actually hits your bank account</li>
                        <li><strong>PAYG tax</strong> goes to the ATO - you might get some back at tax time</li>
                        <li><strong>Super</strong> is extra money (11.5%) your employer puts aside for retirement</li>
                        <li><strong>YTD</strong> (Year to Date) helps you track your annual earnings for tax</li>
                        <li>Keep all your payslips - you'll need them for tax returns, Centrelink, loans, and rental applications</li>
                    </ul>
                </div>

                <button class="play-again-btn" onclick="resetGame()">Try Again</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: "row-hours",
                question: "What does '$27.91/hour' represent for a casual retail worker?",
                options: [
                    "Just the base wage with nothing extra",
                    "The award rate including casual loading (25% extra)",
                    "The minimum wage for all workers",
                    "An above-award negotiated rate"
                ],
                correct: 1,
                explanation: "Casual workers get a 25% 'casual loading' on top of the base rate because they don't get paid leave or job security. The base rate is around $22.33/hr, plus 25% = $27.91. This is the legal minimum for retail casuals under 20."
            },
            {
                id: "row-gross",
                question: "What is 'Gross Pay'?",
                options: [
                    "The amount that goes into your bank account",
                    "Your total earnings BEFORE any deductions",
                    "Your hourly rate multiplied by tax",
                    "The amount after super is added"
                ],
                correct: 1,
                explanation: "Gross pay is your total earnings BEFORE tax, super, or any other deductions are taken out. It's basically your 'on paper' earnings - what you earned before the government and your future self (super) take their share."
            },
            {
                id: "row-tax",
                question: "What is 'PAYG Withholding' and where does it go?",
                options: [
                    "Money your employer keeps as profit",
                    "A fee for using direct deposit",
                    "Income tax taken by the ATO - you may get some back",
                    "Compulsory insurance payments"
                ],
                correct: 2,
                explanation: "PAYG (Pay As You Go) is income tax that your employer sends to the Australian Tax Office (ATO) on your behalf. When you do your tax return, you might get some back as a refund if too much was withheld, or you might owe more if not enough was taken."
            },
            {
                id: "row-super",
                question: "Where does your superannuation (super) money go?",
                options: [
                    "Into your regular bank account with your pay",
                    "To a super fund where it's invested until you retire (60+)",
                    "To the government as extra tax",
                    "Back to your employer after 6 months"
                ],
                correct: 1,
                explanation: "Super goes to a superannuation fund (like AustralianSuper, REST, etc.) where it's invested and grows until you can access it at retirement (currently around age 60). It's EXTRA money on top of your wages - your employer has to pay it by law. In 2025-26 it's 11.5% of your ordinary earnings."
            },
            {
                id: "row-net",
                question: "What is 'Net Pay'?",
                options: [
                    "Your total earnings for the year",
                    "Gross pay plus super contributions",
                    "The actual amount deposited in your bank account",
                    "What you'd earn if you worked full-time"
                ],
                correct: 2,
                explanation: "Net pay (also called 'take-home pay') is what actually lands in your bank account after all deductions. It's Gross Pay minus Tax minus any other deductions. This is the real money you can spend. Note: super isn't deducted from your pay - it's paid separately by your employer."
            },
            {
                id: "row-ytd",
                question: "What does 'YTD' (Year to Date) track?",
                options: [
                    "Your earnings at your previous job",
                    "Your cumulative earnings since July 1 (start of financial year)",
                    "How much you'll earn by the end of the year",
                    "Your average weekly earnings"
                ],
                correct: 1,
                explanation: "YTD (Year to Date) shows your cumulative totals since July 1 - the start of the Australian financial year. This helps you track how much you've earned and how much tax has been withheld for your tax return. The financial year runs July 1 to June 30."
            },
            {
                id: "row-ytd-tax",
                question: "At tax time, if your YTD Tax Withheld ($828) is MORE than you actually owe, what happens?",
                options: [
                    "You lose the extra money",
                    "The ATO keeps it for next year",
                    "You get a tax REFUND for the difference",
                    "Your employer has to pay you back"
                ],
                correct: 2,
                explanation: "If too much tax was withheld throughout the year, you get a TAX REFUND when you lodge your tax return. This often happens with casual workers who have variable hours. The ATO calculates your actual tax owed vs what was withheld, and refunds the difference. This is why doing your tax return is important!"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            buildProgressBar();
            loadQuestion();
        }

        function buildProgressBar() {
            document.getElementById('progressBar').innerHTML = questions.map((_, i) =>
                `<div class="progress-dot" id="dot-${i}"></div>`
            ).join('');
            document.getElementById('dot-0').classList.add('current');
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            answered = false;

            // Highlight current row
            document.querySelectorAll('.pay-row, .total-row').forEach(row => {
                row.classList.remove('current-question', 'clickable');
            });
            document.getElementById(q.id).classList.add('current-question');

            document.getElementById('questionNumber').textContent = `QUESTION ${currentQuestion + 1} OF ${questions.length}`;
            document.getElementById('questionText').textContent = q.question;

            document.getElementById('optionsGrid').innerHTML = q.options.map((opt, i) =>
                `<button class="option-btn" onclick="selectAnswer(${i})">${opt}</button>`
            ).join('');

            document.getElementById('explanationBox').classList.remove('show');
            document.getElementById('nextBtn').classList.add('hidden');
        }

        function selectAnswer(index) {
            if (answered) return;
            answered = true;

            const q = questions[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');

            buttons.forEach((btn, i) => {
                btn.disabled = true;
                if (i === q.correct) btn.classList.add('correct');
                if (i === index && i !== q.correct) btn.classList.add('wrong');
            });

            if (index === q.correct) {
                score++;
                document.getElementById('scoreDisplay').textContent = `${score}/${questions.length}`;
            }

            // Mark row as answered
            document.getElementById(q.id).classList.remove('current-question');
            document.getElementById(q.id).classList.add('answered');

            // Update progress dot
            const dot = document.getElementById(`dot-${currentQuestion}`);
            dot.classList.remove('current');
            dot.classList.add(index === q.correct ? 'completed' : '');

            // Show explanation
            document.getElementById('explanationText').textContent = q.explanation;
            document.getElementById('explanationBox').classList.add('show');
            document.getElementById('nextBtn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestion++;

            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }

            document.getElementById(`dot-${currentQuestion}`).classList.add('current');
            loadQuestion();
        }

        function endGame() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.remove('hidden');
            document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
        }

        function resetGame() {
            currentQuestion = 0;
            score = 0;
            answered = false;

            document.querySelectorAll('.pay-row, .total-row').forEach(row => {
                row.classList.remove('current-question', 'answered', 'clickable');
            });

            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }
    </script>
    <script>
        // Back to Presentation functionality
        (function() {
            const params = new URLSearchParams(window.location.search);
            const from = params.get('from');
            if (from) {
                const navLinks = document.querySelector('.nav-links');
                if (navLinks) {
                    const backBtn = document.createElement('a');
                    backBtn.href = `../../presentations/${from}/index.html`;
                    backBtn.className = 'back-btn';
                    backBtn.textContent = '‚Üê Back to Presentation';
                    navLinks.insertBefore(backBtn, navLinks.firstChild);
                }
            }
        })();
    </script>
</body>
</html>
